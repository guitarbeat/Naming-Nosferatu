import{c as fe,u as We,r as i,a as $e,b as xe,d as $,e as qe,f as ve,E as je,o as Ke,s as we,V as ne,g as Qe,j as e,L as Ne,I as pe,T as Se,h as _,B as H,i as ke,k as Ye,l as Oe,m as Xe,n as Je,p as oe,q as ce,C as W,t as de,F as Ze,v as et,w as tt,x as ue,y as me,X as he,z as at,A as st,D as rt,G as lt,H as it,J as I,K as nt,R as q,M as Z,N as X,O as ye,P as ot,Q as ct,S as dt,U as ut,W as mt,Y as ht,Z as ft}from"./index-CGEtTDdL.js";import{u as xt,C as Ce,E as pt,T as Te,N as gt,c as bt,p as wt,b as J}from"./Dashboard-B9DBQcAQ.js";const yt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vt=fe("check",yt);const jt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ee=fe("chevron-left",jt);const Nt=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],St=fe("upload",Nt),kt=[{id:"fallback-1",name:"Whiskers"},{id:"fallback-2",name:"Mittens"},{id:"fallback-3",name:"Shadow"},{id:"fallback-4",name:"Luna"},{id:"fallback-5",name:"Oliver"}];function Ct({userName:t,mode:s="tournament",enableErrorHandling:d=!0}){const n=We(),{data:l=[],isLoading:r,error:u,refetch:c}=xt({queryKey:["names",s,t],queryFn:async()=>{try{let o;if(s==="tournament")o=await ve.getTrendingNames(!0);else{if(!t)return[];o=(await Qe.getUserRatedNames(t)).map(b=>({...b,owner:t}))}if(!Array.isArray(o))throw new Error("Invalid response: namesData is not an array");return[...o].sort((g,b)=>(g?.name||"").localeCompare(b?.name||""))}catch(o){if(d&&je.handleError(o,`${s==="tournament"?"TournamentSetup":"Profile"} - Fetch Names`,{isRetryable:!0,affectsUserData:!1,isCritical:!1}),s==="tournament")return kt;throw o}},staleTime:1e3*60*5,gcTime:1e3*60*30}),w=i.useMemo(()=>new Set(l.filter(o=>o.is_hidden===!0).map(o=>o.id)),[l]),m=i.useCallback(o=>{n.setQueryData(["names",s,t],(g=[])=>typeof o=="function"?o(g):o)},[n,s,t]);return{names:l,hiddenIds:w,isLoading:r,error:u,refetch:c,setNames:m}}function Tt({names:t=[],mode:s="tournament",userName:d,enableAutoSave:n=!0}){const[l,r]=i.useState(new Set),u=i.useRef(0),c=i.useMemo(()=>t.filter(f=>l.has(String(f.id))),[t,l]),w=l.size,{scheduleSave:m}=$e({userName:s==="tournament"?d:null,enableAutoSave:n}),o=i.useCallback(f=>{r(a=>{const x=f(a);if(s==="tournament"){const y=t.filter(N=>x.has(String(N.id)));Date.now()-u.current>1e3,m(y)}return x})},[s,t,m]),g=i.useCallback(f=>{const a=typeof f=="string"?f:String(f.id);o(x=>{const y=new Set(x);return y.has(a)?y.delete(a):y.add(a),y})},[o]),b=i.useCallback((f,a)=>{const x=String(f);o(y=>{const N=new Set(y);return a?N.add(x):N.delete(x),N})},[o]),p=i.useCallback((f=[],a=!0)=>{!Array.isArray(f)||f.length===0||o(x=>{const y=new Set(x);return f.forEach(N=>{a?y.add(String(N)):y.delete(String(N))}),y})},[o]),h=i.useCallback(()=>{o(f=>f.size===t.length?new Set:new Set(t.map(x=>String(x.id))))},[t,o]),j=i.useCallback(()=>{o(()=>new Set)},[o]),v=i.useCallback(f=>{const a=typeof f=="string"?f:String(f.id);return l.has(a)},[l]);return{selectedNames:c,selectedIds:l,setSelectedIds:r,toggleName:g,toggleNameById:b,toggleNamesByIds:p,selectAll:h,clearSelection:j,isSelected:v,selectedCount:w}}const Et=Ke({name:we().min(ne.MIN_CAT_NAME_LENGTH,"Name must be at least 2 characters").max(ne.MAX_CAT_NAME_LENGTH,"Name must be 50 characters or less"),description:we().min(5,"Description can be short!").max(ne.MAX_DESCRIPTION_LENGTH,"Description must be 500 characters or less")});function Ae({onSuccess:t,initialValues:s}={}){const[d,n]=i.useState(""),[l,r]=i.useState(""),u=i.useRef(!0),c=i.useRef(null),{showSuccess:w,showError:m}=xe(),{user:o}=$(),g=qe({schema:Et,initialValues:{name:s?.name||"",description:s?.description||""},onSubmit:async p=>{if(!o.name||!o.name.trim()){n("Please log in to suggest a name.");return}try{n("");const h=await ve.addName(p.name,p.description,o.name);if(!u.current)return;if(h?.success===!1)throw new Error(h.error||"Unable to add name. Please try again.");r("Thank you for your suggestion!"),w("Name suggestion submitted!"),g.reset(),t?.(),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{u.current&&r(""),c.current=null},3e3)}catch(h){if(!u.current)return;const j=h instanceof Error?h.message:"Unable to submit your suggestion. Please try again.";n(j),m(j),je.handleError(h,"Add Name Suggestion",{isRetryable:!0,affectsUserData:!1,isCritical:!1})}}});i.useEffect(()=>(u.current=!0,()=>{u.current=!1,c.current&&clearTimeout(c.current)}),[]);const b=i.useCallback(()=>{g.reset(),n(""),r("")},[g]);return{...g,globalError:d,successMessage:l,handleReset:b,setGlobalError:n}}function At(){const{values:t,isSubmitting:s,handleChange:d,handleSubmit:n,globalError:l,successMessage:r}=Ae(),u=async c=>{c.preventDefault(),await n()};return e.jsx(Ne,{className:"w-full flex flex-col items-center justify-center p-8 backdrop-blur-md rounded-3xl",style:{width:"100%",height:"auto",minHeight:"200px"},radius:24,frost:.2,saturation:1.1,outputBlur:.8,children:e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-6 w-full max-w-2xl mx-auto",style:{padding:"2rem"},children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("label",{htmlFor:"suggest-name",className:"text-xl font-bold text-center text-white/90 drop-shadow-sm",children:"Got a great name in mind?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(pe,{id:"suggest-name",type:"text",value:t.name,onChange:c=>d("name",c.target.value),placeholder:"Enter a cool cat name...",className:"w-full h-[50px] px-4 font-medium backdrop-blur-sm",disabled:s})}),e.jsx(H,{type:"submit",variant:"primary",disabled:!t.name.trim()||!t.description.trim()||s,loading:s,className:"h-[50px] px-8 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold shadow-lg shadow-purple-900/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suggest"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"suggest-description",className:"text-sm font-medium text-white/80",children:"Why this name? (optional but encouraged)"}),e.jsx(Se,{id:"suggest-description",value:t.description,onChange:c=>d("description",c.target.value),placeholder:"Share what makes this name special, its meaning, or why it fits your cat...",rows:3,className:"w-full px-4 py-3 font-medium backdrop-blur-sm resize-none",disabled:s})]})]}),l&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-200 text-sm font-medium text-center animate-in fade-in slide-in-from-top-2",children:l}),r&&e.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-lg text-green-200 text-sm font-medium text-center animate-in fade-in slide-in-from-top-2",children:r}),e.jsx("p",{className:"text-center text-sm text-white/50 font-medium",children:"Your suggestion will be added to the pool for everyone to discover."})]})})}function zt({isOpen:t,onClose:s}){const d=i.useRef(!0),n=i.useRef(null),l=i.useId(),{values:r,errors:u,touched:c,isSubmitting:w,isValid:m,handleChange:o,handleBlur:g,handleSubmit:b,reset:p,globalError:h,successMessage:j,setGlobalError:v}=Ae({onSuccess:()=>{setTimeout(()=>{d.current&&s()},3e3)}});i.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]),i.useEffect(()=>{t&&n.current&&setTimeout(()=>{n.current?.focus()},100)},[t]),i.useEffect(()=>{if(!t)return;const a=x=>{x.key==="Escape"&&(p(),s())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t,s,p]);const f=i.useCallback(()=>{w||(p(),v(""),s())},[w,s,p,v]);return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[1050] backdrop-blur-sm animate-in fade-in duration-200",onClick:f,"aria-hidden":"true"}),e.jsx(Ne,{id:`modal-glass-${l.replace(/:/g,"-")}`,width:500,height:600,radius:20,scale:-80,saturation:1.05,frost:.08,inputBlur:8,outputBlur:1.2,className:"z-[1051] overflow-hidden",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(90vw, 500px)",maxHeight:"90vh",height:"auto",minHeight:"400px",maxWidth:"min(90vw, 500px)",zIndex:"1051"},children:e.jsxs("div",{className:"flex flex-col h-full bg-black/40 text-white",role:"dialog","aria-labelledby":"suggest-name-title","aria-describedby":"suggest-name-description","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-white/5",children:[e.jsx("h2",{id:"suggest-name-title",className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-400",children:"ðŸ’¡ Suggest a Name"}),e.jsx("button",{type:"button",className:"flex items-center justify-center w-8 h-8 rounded-full text-white/50 hover:text-white hover:bg-white/10 transition-colors",onClick:f,"aria-label":"Close modal",disabled:w,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{id:"suggest-name-description",className:"text-sm text-white/70 mb-6",children:"Help us expand the list by suggesting new cat names!"}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),b()},className:"flex flex-col gap-5",children:[e.jsx(pe,{id:"modal-name-input",label:"Name",ref:n,type:"text",value:r.name,onChange:a=>{o("name",a.target.value),h&&v("")},onBlur:()=>g("name"),placeholder:"e.g., Whiskers",maxLength:50,showSuccess:!0,error:c.name?u.name:null}),e.jsx(Se,{id:"modal-description-input",label:"Description",value:r.description,onChange:a=>{o("description",a.target.value),h&&v("")},onBlur:()=>g("description"),placeholder:"Why is this name special? (e.g. 'He looks like a vampire!')",disabled:w,maxLength:500,rows:4,error:c.description?u.description:null}),h&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-200 text-sm font-medium animate-in fade-in slide-in-from-top-2",children:h}),j&&e.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-lg text-green-200 text-sm font-medium animate-in fade-in slide-in-from-top-2",children:j}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t border-white/10",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 rounded-lg text-sm font-medium text-white/70 hover:text-white hover:bg-white/10 transition-colors",disabled:w,children:"Cancel"}),e.jsx("button",{type:"submit",className:_("px-6 py-2 rounded-lg text-sm font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg shadow-purple-900/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",w&&"animate-pulse"),disabled:w||!m,children:w?"Submitting...":"Submit Suggestion"})]})]})]})]})})]}):null}function It({variant:t="inline",isOpen:s=!1,onClose:d}){return t==="modal"?e.jsx(zt,{isOpen:s,onClose:d||(()=>{})}):e.jsx(At,{})}function Mt({onComplete:t,existingRatings:s={},names:d=[],onVote:n}){const{showSuccess:l,showError:r}=xe(),u=Ye(d),c=Oe(),{setSelectedOption:w,isTransitioning:m,setIsTransitioning:o,isProcessing:g,setIsProcessing:b,setLastMatchResult:p,setShowMatchResult:h,setVotingError:j,handleVote:v,tournament:f}=Xe(u,s,t),{currentMatch:a,progress:x,roundNumber:y,currentMatchNumber:N,totalMatches:F,handleUndo:M}=f,{handleVoteWithAnimation:L}=Je({isProcessing:g,isTransitioning:m,currentMatch:a,handleVote:v,onVote:n,audioManager:c,setIsProcessing:b,setIsTransitioning:o,setSelectedOption:w,setVotingError:j,setLastMatchResult:p,setShowMatchResult:h,showSuccess:l,showError:r}),S=$(G=>G.ui.showCatPictures),C=$(G=>G.uiActions.setCatPictures);if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:e.jsx(oe,{variant:"spinner"})});const A=S?ce(typeof a.left=="object"?a.left.id:a.left,de):null,z=S?ce(typeof a.right=="object"?a.right.id:a.right,de):null;return e.jsxs("div",{className:"relative min-h-screen w-full flex flex-col overflow-hidden max-w-[430px] mx-auto border-x border-white/5 font-display text-white selection:bg-primary/30",children:[e.jsxs("header",{className:"pt-6 px-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"px-4 py-1.5 rounded-full flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"stars"}),e.jsxs("span",{className:"text-xs font-bold tracking-widest uppercase text-white/90",children:["Round ",y]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-stardust",children:"workspace_premium"}),e.jsx("span",{className:"text-xs font-bold",children:x})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full shadow-[0_0_10px_#a65eed]",style:{width:`${N/F*100}%`}})})})]}),e.jsx("section",{className:"mt-6 px-4",children:e.jsxs(W,{className:"flex flex-row items-center justify-between",padding:"small",variant:"default",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:c.handleToggleMute,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 text-white/60 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:c.isMuted?"volume_off":"volume_up"})})}),e.jsxs("button",{onClick:()=>C(!S),className:`flex items-center gap-2 px-4 h-10 rounded-lg font-bold text-xs uppercase tracking-wider shadow-lg ${S?"bg-primary shadow-primary/20":"bg-white/10"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"pets"}),e.jsx("span",{children:S?"Names Only":"Show Cats"})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center px-4 relative my-4",children:[e.jsxs("div",{className:"relative grid grid-cols-2 gap-4 w-full h-full max-h-[500px]",children:[e.jsxs(W,{interactive:!0,onClick:()=>L("left"),className:"flex flex-col items-center justify-between relative overflow-hidden group cursor-pointer h-full",variant:"default",children:[e.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden mb-4 bg-white/10 flex items-center justify-center",children:A?e.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url('${A}')`}}):e.jsx("span",{className:"text-white/20 text-6xl font-bold select-none",children:typeof a.left=="object"&&a.left?.name&&a.left.name[0]?.toUpperCase()||"?"})}),e.jsx("div",{className:"text-center pb-4 z-10 w-full",children:e.jsx("h3",{className:"font-whimsical text-2xl text-white tracking-wide break-words w-full",children:typeof a.left=="object"?a.left?.name:a.left})})]}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-20 pointer-events-none",children:e.jsx("div",{className:"size-14 rounded-full flex items-center justify-center border-2 border-white/30 bg-primary/20 backdrop-blur-md shadow-lg",children:e.jsx("span",{className:"font-bold text-xl italic tracking-tighter",children:"VS"})})}),e.jsxs(W,{interactive:!0,onClick:()=>L("right"),className:"flex flex-col items-center justify-between relative overflow-hidden group cursor-pointer h-full",variant:"default",children:[e.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden mb-4 bg-white/10 flex items-center justify-center",children:z?e.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url('${z}')`}}):e.jsx("span",{className:"text-white/20 text-6xl font-bold select-none",children:typeof a.right=="object"&&a.right?.name&&a.right.name[0]?.toUpperCase()||"?"})}),e.jsx("div",{className:"text-center pb-4 z-10 w-full",children:e.jsx("h3",{className:"font-whimsical text-2xl text-white tracking-wide break-words w-full",children:typeof a.right=="object"?a.right?.name:a.right})})]})]}),e.jsxs("div",{onClick:M,className:"mt-6 glass-panel py-2 px-6 rounded-full flex items-center gap-3 border border-primary/20 cursor-pointer hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm text-primary",children:"undo"}),e.jsx("span",{className:"text-[10px] font-bold text-white/60 tracking-widest uppercase",children:"Undo"})]})]}),e.jsx("div",{className:"absolute top-[-10%] left-[-10%] size-64 bg-primary/10 rounded-full blur-[100px] -z-10"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] size-64 bg-stardust/10 rounded-full blur-[100px] -z-10"})]})}function Lt(t){return e.jsx(ke,{variant:"boundary",children:e.jsx(Mt,{...t})})}function _t({mode:t,userName:s,profileProps:d={},tournamentProps:n={},analysisMode:l,setAnalysisMode:r,extensions:u={}}){const{names:c,isLoading:w,error:m,refetch:o,setNames:g}=Ct({userName:s??null,mode:t}),{selectedNames:b,selectedIds:p,toggleName:h,toggleNameById:j,toggleNamesByIds:v,selectAll:f,selectedCount:a,clearSelection:x,isSelected:y}=Tt({names:c,mode:t,userName:s??null}),{errors:N,ui:F,errorActions:M,tournamentActions:L,tournament:S}=$();i.useEffect(()=>{if(t==="tournament"&&L?.setSelection){const E=S.selectedNames||[];(b.length!==E.length||b.some((T,D)=>T.id!==E[D]?.id))&&L.setSelection(b)}},[b,L,t,S.selectedNames]);const C=t==="tournament"&&(!!N.current||!!m),A=M?.clearError??(()=>{}),[z,G]=i.useState(!1),[R,ee]=i.useState(""),[V,K]=i.useState("alphabetical"),{isSwipeMode:Le,showCatPictures:_e}=F,[B,te]=i.useState(Ze.VISIBILITY.VISIBLE),[Fe,Re]=i.useState("all"),Q=d.userFilter??Fe,Y=d.setUserFilter??Re,[U,ae]=i.useState("desc"),[P,se]=i.useState("all"),[re,ge]=i.useState("all"),[De,Ve]=i.useState("manage"),be=et(),le=tt(),Ue=i.useCallback(()=>{const E=!l;r(E);const k=le.pathname,T=new URLSearchParams(le.search);E?T.set("analysis","true"):T.delete("analysis");const D=T.toString(),ie=D?`${k}?${D}`:k;be(ie)},[be,r,l,le]),Be=i.useMemo(()=>{if(t!=="tournament")return[];const k=me(l?B:"visible");let T=ue(c,{searchTerm:R,sortBy:V,sortOrder:U,visibility:k,isAdmin:!!d.isAdmin});return z&&(T=T.filter(D=>b.some(ie=>ie.id===D.id))),T},[c,t,l,B,R,V,U,d.isAdmin,z,b]),O=i.useMemo(()=>{const k=me(t==="tournament"&&!l?"visible":B);let T=ue(c,{searchTerm:R,sortBy:V,sortOrder:U,visibility:k,isAdmin:!!d.isAdmin});return P!=="all"&&(P==="selected"?T=T.filter(D=>y(D)):T=T.filter(D=>!y(D))),T},[c,t,l,B,R,V,U,d.isAdmin,P,y]),He=i.useMemo(()=>t==="tournament"&&l?{searchTerm:R,sortBy:V,filterStatus:B,userFilter:Q,selectionFilter:P,dateFilter:re,sortOrder:U}:t==="tournament"?{searchTerm:R,sortBy:V,sortOrder:U}:{filterStatus:B,userFilter:Q,selectionFilter:P,sortBy:V,sortOrder:U},[t,V,B,Q,P,re,U,l,R]),Ge=i.useCallback((E,k)=>{if(t==="tournament"&&l)switch(E){case"searchTerm":ee(String(k)||"");break;case"sortBy":K(String(k)||"alphabetical");break;case"filterStatus":te(String(k));break;case"userFilter":Y(String(k));break;case"selectionFilter":se(String(k));break;case"dateFilter":ge(String(k)||"all");break;case"sortOrder":ae(String(k));break}else if(t==="tournament")switch(E){case"searchTerm":ee(String(k)||"");break;case"sortBy":K(String(k)||"alphabetical");break}else switch(E){case"filterStatus":te(String(k));break;case"userFilter":Y(String(k));break;case"selectionFilter":se(String(k));break;case"sortBy":K(String(k)||"alphabetical");break;case"sortOrder":ae(String(k));break}},[t,l,Y]),Pe=i.useMemo(()=>({total:c.length,visible:O.length,hidden:c.filter(E=>E.is_hidden).length,selected:a}),[c.length,O.length,a,c]);return{names:c,isLoading:w,isError:C,error:C?m:null,dataError:m,refetch:o,clearErrors:A,setNames:g,setHiddenIds:E=>{g(k=>k.map(T=>({...T,is_hidden:E.has(T.id),isHidden:E.has(T.id)})))},selectedNames:b,selectedIds:p,isSelectionMode:!1,setIsSelectionMode:()=>{},toggleName:h,toggleNameById:j,toggleNamesByIds:v,clearSelection:x,selectAll:f,isSelected:y,selectedCount:a,searchQuery:R,setSearchQuery:ee,filterStatus:B,setFilterStatus:te,sortBy:V,setSortBy:K,sortOrder:U,setSortOrder:ae,showSelectedOnly:z,setShowSelectedOnly:G,selectionFilter:P,setSelectionFilter:se,userFilter:Q,setUserFilter:Y,dateFilter:re,setDateFilter:ge,isSwipeMode:Le,showCatPictures:_e,activeTab:De,setActiveTab:Ve,filteredNames:O,filteredNamesForSwipe:Be,stats:Pe,filterConfig:He,handleFilterChange:Ge,handleAnalysisModeToggle:Ue,profileProps:d,tournamentProps:n,analysisMode:l,setAnalysisMode:r,sortedNames:O,extensions:u}}const Ft=16,Rt=280;function Dt(t,s={}){const d=i.useRef(null),n=i.useRef([]),[l,r]=i.useState([]),[u,c]=i.useState([]),{columnCount:w,gap:m=Ft,minColumnWidth:o=Rt}=s,[g,b]=i.useState(o),p=i.useCallback(()=>{if(!d.current||t===0){r([]),c([]);return}const f=d.current.offsetWidth;if(f===0)return;const a=w||Math.max(1,Math.floor((f+m)/(o+m))),x=(a-1)*m,y=(f-x)/a;b(y);const N=Array(Number(a)).fill(0),F=[];n.current.forEach((M,L)=>{if(!M||L>=t)return;const S=N.indexOf(Math.min(...N)),C=S*(y+m),A=N[S];F[L]={column:S,left:C,top:A},N[S]+=M.offsetHeight+m}),r(F),c(N)},[t,w,m,o]);i.useEffect(()=>{const v=setTimeout(()=>{p()},0);let f;const a=new ResizeObserver(()=>{clearTimeout(f),f=setTimeout(()=>{p()},100)});return d.current&&a.observe(d.current),n.current.forEach(x=>{x&&a.observe(x)}),()=>{clearTimeout(v),clearTimeout(f),a.disconnect()}},[p]);const h=i.useRef(null),j=i.useCallback(v=>f=>{n.current[v]!==f&&(n.current[v]=f,h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{p(),h.current=null},10))},[p]);return i.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),{containerRef:d,setItemRef:j,positions:l,columnHeights:u,columnWidth:g,columnCount:u.length,totalHeight:Math.max(0,...u),recalculate:p}}function Vt({images:t,currentIndex:s,onClose:d,onNavigate:n}){i.useEffect(()=>{const r=u=>{u.key==="Escape"?d():u.key==="ArrowLeft"?n(s===0?t.length-1:s-1):u.key==="ArrowRight"&&n(s===t.length-1?0:s+1)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[s,t.length,d,n]);const l=t[s];return l?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center animate-in fade-in duration-200",onClick:d,children:e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{type:"button",className:"absolute top-4 right-4 z-[110] p-3 text-white/50 hover:text-white bg-black/20 hover:bg-white/10 backdrop-blur-lg rounded-full transition-all",onClick:d,children:e.jsx(he,{size:24})}),e.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-[110] p-4 text-white/50 hover:text-white bg-black/20 hover:bg-white/10 backdrop-blur-lg rounded-full transition-all hidden md:block",onClick:()=>n(s===0?t.length-1:s-1),children:e.jsx(Ee,{size:32})}),e.jsx("div",{className:"relative max-w-[95vw] max-h-[95vh] w-full h-full p-4 md:p-12 flex items-center justify-center",children:e.jsx("img",{src:l,alt:`Photo ${s+1}`,className:"max-w-full max-h-full object-contain drop-shadow-2xl rounded-sm"})}),e.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-[110] p-4 text-white/50 hover:text-white bg-black/20 hover:bg-white/10 backdrop-blur-lg rounded-full transition-all hidden md:block",onClick:()=>n(s===t.length-1?0:s+1),children:e.jsx(Ce,{size:32})}),e.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white/60 font-mono text-sm bg-black/40 backdrop-blur-md px-4 py-1.5 rounded-full border border-white/5",children:[s+1," / ",t.length]})]})}):null}const ze=i.memo(({nameObj:t,isSelected:s,onToggleName:d,isAdmin:n,showCatPictures:l,imageList:r,onToggleVisibility:u,onDelete:c,onImageClick:w,index:m})=>{const o=t.id,g=lt(t),b=i.useMemo(()=>{if(!(!t||!l||!r.length))return it(t.id,r)},[t,l,r]),p=i.useCallback(()=>{b&&w(b)},[b,w]);return e.jsx(I.div,{className:"w-full h-full",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:Math.min(m*.03,.5)},children:e.jsx(nt,{name:t.name||"",description:t.description,isSelected:s,onClick:()=>d?.(t),image:b,onImageClick:b?p:void 0,metadata:n?{rating:t.avg_rating||1500,popularity:t.popularity_score}:void 0,className:_(g&&"opacity-50 grayscale"),isAdmin:n,isHidden:g,_onToggleVisibility:n?()=>u?.(o):void 0,_onDelete:n?()=>c?.(t):void 0,onSelectionChange:void 0,size:"medium"})})});ze.displayName="GridItem";function Ie({names:t=[],selectedNames:s=[],onToggleName:d,filters:n={},isAdmin:l=!1,showSelectedOnly:r=!1,showCatPictures:u=!1,imageList:c=[],onToggleVisibility:w,onDelete:m,isLoading:o=!1,className:g=""}){const[b,p]=i.useState(null),[h,j]=i.useState([]),v=i.useMemo(()=>[...h,...c],[h,c]),f=i.useCallback(S=>{const C=v.indexOf(S);C!==-1&&p(C)},[v]),{containerRef:a,setItemRef:x,positions:y,totalHeight:N,columnWidth:F}=Dt(t.length,{minColumnWidth:280,gap:16}),M=i.useMemo(()=>at(s),[s]),L=i.useMemo(()=>{const S=me(n.filterStatus||"visible");let C=ue(t,{searchTerm:n.searchTerm,sortBy:n.sortBy,sortOrder:n.sortOrder||"desc",visibility:S,isAdmin:l});return r&&M.size>0&&(C=C.filter(A=>{const z=A.id;return M.has(z)})),C},[t,n,l,r,M]);return o?e.jsx("div",{className:_("relative w-full mx-auto p-4 md:p-6 min-h-[50vh]",g),children:e.jsxs("div",{className:"relative w-full max-w-[1600px] mx-auto grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4",children:[Array.from({length:8}).map((S,C)=>e.jsx("div",{className:"w-full h-40",children:e.jsx(oe,{variant:"card-skeleton",cardSkeletonVariant:"mosaic-card",size:"medium"})},`skeleton-${C}`)),e.jsx("div",{className:"col-span-full flex justify-center py-8",children:e.jsx(oe,{variant:"cat",catVariant:"paw",catColor:"neon",text:"Loading cat names...",size:"small"})})]})}):L.length===0?e.jsx("div",{className:_("relative w-full mx-auto p-4 md:p-6 min-h-[50vh]",g),children:e.jsx(pt,{title:"No names found",description:r?"You haven't selected any names yet. Switch back to browse mode to pick some favorites!":"No names match your search or filters. Try adjusting your filters or search terms to find what you're looking for.",icon:r?"ðŸ•¸ï¸":"ðŸ”"})}):e.jsxs("div",{className:_("relative w-full mx-auto p-4 md:p-6",g),children:[e.jsx("div",{className:"relative w-full max-w-[1600px] mx-auto transition-height duration-300",role:"list",ref:a,style:{height:N||"auto",position:"relative"},children:L.map((S,C)=>{const A=M.has(S.id),z=y[C];return e.jsx("div",{className:"absolute top-0 left-0",ref:x(C),style:{position:"absolute",top:z?.top||0,left:z?.left||0,width:F||280,transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx(ze,{nameObj:S,isSelected:A,onToggleName:d,isAdmin:l,showCatPictures:u,imageList:v,onToggleVisibility:w,onDelete:m,onImageClick:f,index:C})},S.id)})}),l&&e.jsx("div",{className:"flex justify-center mt-12 mb-8",children:e.jsxs("label",{className:"cursor-pointer flex items-center gap-3 px-8 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-full transition-all font-bold tracking-wider uppercase text-sm border border-purple-500/20 active:scale-95 shadow-xl shadow-purple-900/30",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async S=>{const C=Array.from(S.target.files||[]);if(C.length)try{const A=[];await Promise.all(C.map(async z=>{const G=await st(z,{maxWidth:1600,maxHeight:1600,quality:.8}),R=await rt.upload(G,"admin");R?.path&&A.push(R.path)})),A.length>0&&j(z=>[...A,...z])}catch{}},style:{display:"none"}}),e.jsx(St,{size:20}),e.jsx("span",{children:"Upload New Cat Photos"})]})}),b!==null&&e.jsx(Vt,{images:v,currentIndex:b,onClose:()=>p(null),onNavigate:p})]})}function Ut({filterConfig:t,handleFilterChange:s,names:d,isLoading:n,extensions:l,profileProps:r,selectedNames:u,toggleName:c,showCatPictures:w=!1,imageList:m=[]}){return e.jsxs("div",{className:"w-full max-w-[1600px] mx-auto min-h-[80vh] flex flex-col gap-8 px-4 md:px-8 pb-32","data-mode":"profile",children:[l.header&&e.jsx("div",{className:"w-full flex flex-col gap-4 animate-in fade-in slide-in-from-top-4 duration-500",children:typeof l.header=="function"?l.header():l.header}),l.dashboard&&e.jsx("section",{className:"w-full flex flex-col gap-6 animate-in fade-in zoom-in-95 duration-500 delay-100",children:q.isValidElement(l.dashboard)?l.dashboard:typeof l.dashboard=="function"?q.createElement(l.dashboard):l.dashboard}),e.jsx("section",{className:"w-full sticky top-20 z-30 transition-all duration-300",children:e.jsx("div",{className:"backdrop-blur-xl bg-black/60 rounded-2xl border border-white/10 p-2 shadow-2xl",children:e.jsx(Te,{mode:"profile",filters:t,onFilterChange:s,showUserFilter:r.showUserFilter,showSelectionFilter:!!r.selectionStats,userOptions:r.userOptions})})}),e.jsx("section",{className:_("w-full flex justify-end gap-2 px-2"),children:u.length===0?e.jsx(H,{variant:"secondary",size:"small",onClick:()=>{document.querySelector('[data-component="name-grid"]')?.scrollIntoView({behavior:"smooth"})},className:"font-medium whitespace-nowrap",children:"Select Names"}):e.jsxs(H,{variant:"primary",size:"small",onClick:()=>{console.log("View selected names:",u)},className:"font-medium whitespace-nowrap",children:["View Selected (",u.length,")"]})}),l.bulkActions&&e.jsx("section",{className:_("w-full flex justify-end gap-2 px-2"),children:l.bulkActions&&q.createElement(l.bulkActions,{onExport:()=>{console.log("Export",d.length,"names")}})}),e.jsx("section",{className:_("w-full flex-1"),children:e.jsx(Ie,{names:d,selectedNames:u,onToggleName:c,filters:t,isAdmin:!!r.isAdmin,onToggleVisibility:r.onToggleVisibility?o=>{r.onToggleVisibility?.(String(o)).catch(console.error)}:void 0,onDelete:r.onDelete?o=>{r.onDelete?.(o).catch(console.error)}:void 0,showCatPictures:w,imageList:m,isLoading:n,className:"min-h-[400px]"})}),l.navbar&&e.jsx("div",{className:_("fixed bottom-0 left-0 right-0 z-50 pointer-events-none"),children:e.jsx("div",{className:_("pointer-events-auto"),children:typeof l.navbar=="function"?l.navbar():l.navbar})})]})}function Bt({analysisMode:t,filterConfig:s,handleFilterChange:d,selectedCount:n,onStartTournament:l,selectedNames:r,showSelectedOnly:u,setShowSelectedOnly:c,names:w,extensions:m,isSwipeMode:o,showCatPictures:g,filteredNamesForSwipe:b,toggleName:p,isLoading:h,isAdmin:j,imageList:v,swipeableCards:f}){return t?null:e.jsxs("main",{className:"w-full max-w-[1600px] mx-auto min-h-[80vh] flex flex-col gap-4 px-4 pb-24","data-component":"tournament-setup",children:[e.jsx(Te,{mode:"tournament",filters:s,onFilterChange:d,showUserFilter:!1,showSelectionFilter:!1}),m.header&&(typeof m.header=="function"?m.header():m.header),!m.nameGrid&&e.jsx("nav",{className:"flex justify-end gap-2","aria-label":"Selection actions",children:n===0?e.jsx(H,{variant:"secondary",size:"small",onClick:()=>document.querySelector('[data-component="name-grid"]')?.scrollIntoView({behavior:"smooth"}),className:"font-medium whitespace-nowrap",children:"Pick Names"}):n<2?e.jsx(H,{variant:"secondary",size:"small",onClick:()=>c(!u),className:"font-medium whitespace-nowrap",children:u?"Show All":"Show Selected"}):e.jsxs(H,{variant:"primary",size:"small",onClick:()=>l?.(r),className:_("font-bold whitespace-nowrap","bg-gradient-to-br from-purple-600 to-purple-800 text-white","hover:-translate-y-0.5 hover:shadow-lg transition-all duration-200"),children:["Start (",n,")"]})}),!m.nameGrid&&e.jsxs("div",{className:"flex flex-col gap-1",role:"progressbar","aria-valuenow":n,"aria-valuemax":w.length,children:[e.jsx("div",{className:"h-2 bg-white/[0.04] rounded-full overflow-hidden border border-white/[0.06]",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500/80 to-pink-500/80 transition-all duration-500",style:{width:`${Math.max(n/Math.max(w.length,1)*100,3)}%`}})}),e.jsxs("p",{className:"text-[11px] text-white/40 font-medium flex justify-between px-0.5",children:[e.jsxs("span",{children:[n," / ",w.length," selected"]}),n<2&&e.jsxs("span",{className:"text-amber-400/70 font-semibold animate-pulse",children:["Need ",2-n," more"]})]})]}),e.jsx("section",{className:"flex-1 relative min-h-[500px]","data-component":"name-grid","aria-label":"Name selection",children:e.jsx(Z,{mode:"wait",children:m.nameGrid?e.jsx(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full h-full",children:m.nameGrid},"extension-grid"):o&&f&&!h?e.jsx(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"w-full h-full",children:q.createElement(f,{names:b,selectedNames:r,onToggleName:p,onRateName:(a,x)=>console.log("Rate",a,x),isAdmin:!!j,isSelectionMode:!1,showCatPictures:g,imageList:v,onStartTournament:l})},"swipe-mode"):e.jsx(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"w-full h-full",children:e.jsx(Ie,{names:w,selectedNames:r,onToggleName:p,filters:s,isAdmin:j,showSelectedOnly:u,showCatPictures:g,imageList:v,isLoading:h})},"grid-mode")})})]})}function Ht({mode:t="tournament",userName:s,onStartTournament:d,analysisMode:n,setAnalysisMode:l,extensions:r={},tournamentProps:u={},profileProps:c={},className:w=""}){const[m,o]=i.useState(!1),g=n??m,b=l??o,{showToast:p}=xe();i.useEffect(()=>{if(typeof window>"u"||n!==void 0)return;const y=new URLSearchParams(window.location.search);o(y.get("analysis")==="true")},[n]);const h=_t({mode:t,userName:s,profileProps:c,tournamentProps:u,analysisMode:g,setAnalysisMode:b,extensions:r}),{isError:j,dataError:v,clearErrors:f}=h;i.useEffect(()=>{j&&v&&p(v.message||"An error occurred while loading data","error")},[j,v,p]);const a=i.useCallback(y=>{d&&(p("Starting tournament...","success",{duration:2e3}),d(y))},[d,p]),x=()=>g&&r.dashboard?e.jsxs("div",{className:_("w-full max-w-[1600px] mx-auto min-h-[80vh] flex flex-col gap-8 px-4 md:px-8 bg-black/50 backdrop-blur-sm rounded-3xl border border-white/5",w),"data-component":"name-management-view","data-mode":"analysis",children:[r.header&&e.jsx("div",{className:"w-full flex flex-col gap-4 animate-in fade-in slide-in-from-top-4 duration-500",children:typeof r.header=="function"?r.header():r.header}),e.jsx("section",{className:"w-full flex-1 min-h-[500px] animate-in fade-in zoom-in-95 duration-500 delay-100",children:q.isValidElement(r.dashboard)?r.dashboard:typeof r.dashboard=="function"?q.createElement(r.dashboard):r.dashboard})]}):t==="tournament"?e.jsx(Bt,{...h,handleFilterChange:h.handleFilterChange,analysisMode:g,onStartTournament:a,extensions:r,isAdmin:!!(c.isAdmin||u.isAdmin),imageList:u.imageList,swipeableCards:u.swipeableCards}):e.jsx(Ut,{...h,extensions:r,profileProps:c,showCatPictures:h.showCatPictures,imageList:h.tournamentProps.imageList});return e.jsxs(e.Fragment,{children:[j&&e.jsx(ke,{error:v?.message||"An error occurred",onRetry:()=>h.refetch(),onDismiss:f}),e.jsxs(gt,{value:h,children:[r.contextLogic&&(typeof r.contextLogic=="function"?r.contextLogic():r.contextLogic),x()]})]})}const Me=i.memo(({names:t,selectedNames:s,onToggleName:d,showCatPictures:n,imageList:l=[],onStartTournament:r})=>{const[u,c]=i.useState(new Set),[w,m]=i.useState(null),[o,g]=i.useState(0),b=i.useMemo(()=>t.filter(a=>!u.has(String(a.id))),[t,u]),p=b.slice(0,3),h=p[0],j=i.useCallback(a=>s.some(x=>x.id===a.id),[s]),v=i.useCallback((a,x)=>{const y=x.offset.x,N=x.velocity.x,F=100,M=500;if(Math.abs(y)<F&&Math.abs(N)<M){g(0);return}y>F||N>M?(m("right"),X("gameboy-pluck"),j(a)||d(a)):(m("left"),X("wow"),j(a)&&d(a)),c(L=>new Set([...L,String(a.id)])),setTimeout(()=>{m(null),g(0)},300)},[j,d]),f=u.size/t.length*100;return e.jsxs("div",{className:"flex flex-col gap-6 w-full",children:[e.jsx(W,{padding:"small",variant:"default",children:e.jsxs("div",{className:"gap-3 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-default-500 uppercase tracking-wider",children:"Progress"}),e.jsxs(bt,{size:"sm",variant:"flat",color:"primary",className:"font-bold",children:[u.size," / ",t.length]})]}),e.jsx(wt,{value:f,color:"primary",className:"h-2",classNames:{indicator:"bg-gradient-to-r from-primary to-secondary"}})]})}),e.jsx("div",{className:"relative w-full",style:{minHeight:"500px"},children:e.jsx(Z,{mode:"popLayout",children:b.length>0?p.map((a,x)=>e.jsx(I.div,{layout:!0,layoutId:String(a.id),className:"absolute inset-0 flex items-center justify-center",style:{zIndex:10-x},exit:{opacity:0,x:w==="right"?400:-400,rotate:w==="right"?20:-20,transition:{duration:.3}},children:e.jsx(I.div,{drag:x===0?"x":!1,dragConstraints:{left:-200,right:200},onDrag:(y,N)=>{x===0&&g(N.offset.x)},onDragEnd:(y,N)=>{x===0&&v(a,N)},animate:{y:x*12,scale:1-x*.04,opacity:1-x*.2,rotate:x===0?o/20:0},transition:{type:"spring",stiffness:300,damping:30},className:"w-full max-w-md",children:e.jsxs(W,{className:ot("relative flex flex-col items-center justify-between overflow-hidden group transition-all duration-200 h-full",j(a)?"shadow-[0_0_30px_rgba(34,197,94,0.3)]":"",x===0&&"cursor-grab active:cursor-grabbing shadow-2xl active:scale-95",x>0&&"pointer-events-none"),variant:"default",padding:"medium",children:[x===0&&e.jsxs(e.Fragment,{children:[e.jsx(I.div,{className:"absolute left-8 top-1/2 -translate-y-1/2 z-10",initial:{opacity:0,scale:.8},animate:{opacity:o<-50?1:0,scale:o<-50?1:.8},children:e.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-danger/90 backdrop-blur-md rounded-full border-2 border-danger shadow-lg rotate-[-20deg]",children:[e.jsx(he,{size:24,className:"text-white"}),e.jsx("span",{className:"text-white font-black text-lg uppercase",children:"Nope"})]})}),e.jsx(I.div,{className:"absolute right-8 top-1/2 -translate-y-1/2 z-10",initial:{opacity:0,scale:.8},animate:{opacity:o>50?1:0,scale:o>50?1:.8},children:e.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-success/90 backdrop-blur-md rounded-full border-2 border-success shadow-lg rotate-[20deg]",children:[e.jsx(ye,{size:24,className:"text-white fill-white"}),e.jsx("span",{className:"text-white font-black text-lg uppercase",children:"Like"})]})})]}),e.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden border-0 mb-4 bg-white/10 backdrop-blur-md flex items-center justify-center",children:n&&a.id&&l.length>0?e.jsx("div",{className:"w-full h-full bg-cover bg-center opacity-80 group-hover:scale-110 transition-transform duration-700",style:{backgroundImage:`url('${ce(a.id,l)}')`}}):e.jsx("span",{className:"text-white/20 text-6xl font-bold select-none",children:a.name[0]?.toUpperCase()||"?"})}),e.jsxs("div",{className:"text-center pb-4 z-10 w-full",children:[e.jsx("h3",{className:"font-whimsical text-2xl lg:text-3xl text-white tracking-wide drop-shadow-lg break-words w-full",children:a.name}),a.description&&e.jsx("p",{className:"text-white/60 text-sm leading-relaxed max-w-md mt-2 mx-auto",children:a.description}),j(a)&&e.jsx("div",{className:"flex justify-center mt-3",children:e.jsxs("div",{className:"px-3 py-1 bg-success/20 backdrop-blur-md border border-success/30 rounded-full flex items-center gap-2",children:[e.jsx(vt,{size:14,className:"text-success"}),e.jsx("span",{className:"text-success font-bold text-xs tracking-widest uppercase",children:"Selected"})]})})]})]})})},a.id)):e.jsx(I.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center gap-6 p-12",children:e.jsxs(W,{variant:"default",className:"flex flex-col items-center text-center gap-6",children:[e.jsx("div",{className:"text-6xl",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-3xl font-black bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"All Clear!"}),e.jsxs("p",{className:"text-white/60 max-w-md",children:["You've reviewed all ",t.length," names. Ready to start the tournament?"]}),s.length>=2&&e.jsxs(J,{size:"lg",color:"primary",variant:"shadow",onClick:()=>r(s),className:"font-bold text-lg px-8 shadow-primary/40",children:["Start Tournament (",s.length," names)"]})]})})})}),b.length>0&&e.jsxs("div",{className:"flex gap-4 justify-center items-center",children:[e.jsx(J,{isIconOnly:!0,size:"lg",variant:"flat",className:"w-16 h-16 bg-danger/10 hover:bg-danger/20 border-2 border-danger/30 text-danger","aria-label":h?`Discard ${h.name}`:"Discard",onClick:()=>{h&&(m("left"),X("wow"),c(a=>new Set([...a,String(h.id)])),setTimeout(()=>m(null),300))},children:e.jsx(he,{size:28})}),e.jsxs(J,{size:"lg",color:"primary",variant:"shadow",onClick:()=>r(s),disabled:s.length<2,className:"font-bold px-8 shadow-primary/40",children:["Start Tournament (",s.length,")"]}),e.jsx(J,{isIconOnly:!0,size:"lg",variant:"flat",className:"w-16 h-16 bg-success/10 hover:bg-success/20 border-2 border-success/30 text-success","aria-label":h?`Keep ${h.name}`:"Keep",onClick:()=>{h&&(m("right"),X("gameboy-pluck"),j(h)||d(h),c(a=>new Set([...a,String(h.id)])),setTimeout(()=>m(null),300))},children:e.jsx(ye,{size:28,className:"fill-success"})})]}),b.length>0&&u.size===0&&e.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center justify-center gap-3 text-default-400 text-sm",children:[e.jsx(Ee,{size:16,className:"animate-pulse"}),e.jsx("span",{className:"font-medium",children:"Swipe or tap buttons to review names"}),e.jsx(Ce,{size:16,className:"animate-pulse"})]})]})});Me.displayName="SwipeableCards";function Gt({onLogin:t,onStart:s,userName:d="",isLoggedIn:n}){const[l,r]=i.useState(!1),{user:u,userActions:c}=$();i.useEffect(()=>{n&&!u.avatarUrl&&ct(1).then(p=>{p[0]&&c.setAvatar(p[0])})},[n,u.avatarUrl,c]);const{name:w,isLoading:m,handleNameChange:o,handleSubmit:g}=dt(async p=>{await t(p)}),b=ut();return e.jsx(Z,{mode:"wait",children:n?e.jsxs(I.div,{className:"w-full flex-1",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsx("div",{className:"flex justify-center pt-6 pb-4",children:e.jsxs("button",{type:"button",onClick:()=>$.getState().uiActions.setEditingProfile(!0),className:"group relative","aria-label":"Edit profile",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-white/20 overflow-hidden shadow-xl bg-slate-900 group-hover:border-purple-400 group-hover:scale-105 transition-all duration-300 ring-4 ring-purple-500/20 group-hover:ring-purple-500/40",children:e.jsx("img",{alt:"Profile",className:"w-full h-full object-cover",src:u.avatarUrl||"https://placekitten.com/100/100"})}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-black/80 rounded-full text-[10px] text-white/60 font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:"Edit"})]})}),e.jsx(Ht,{mode:"tournament",userName:d,analysisMode:l,setAnalysisMode:r,tournamentProps:{swipeableCards:Me,imageList:de},onStartTournament:s})]},"setup"):e.jsxs(I.div,{className:"flex flex-col items-center justify-center min-h-[60vh] max-w-lg mx-auto p-8 gap-10 relative z-10",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-white/40 tracking-tighter drop-shadow-2xl",children:"Welcome!"}),e.jsxs("p",{className:"text-lg md:text-xl text-white/50 font-medium tracking-wide",children:[b,", please enter your name."]})]}),e.jsxs(W,{className:"w-full space-y-6",padding:"large",background:"glass",children:[e.jsx("div",{className:"space-y-4",children:e.jsx(pe,{type:"text",placeholder:"NAME...",value:w,onChange:o,onKeyDown:p=>p.key==="Enter"&&g(),className:"text-center text-lg h-14 bg-white/5 border-white/10 focus:border-purple-500/50 focus:bg-white/10",autoFocus:!0})}),e.jsx("button",{className:_("w-full py-4 text-center font-black tracking-[0.2em] text-sm uppercase bg-white text-black rounded-xl","hover:bg-purple-50 hover:scale-[1.02] active:scale-[0.98]","transition-all duration-300 shadow-[0_0_30px_-5px_rgba(255,255,255,0.3)]",m&&"opacity-50 cursor-not-allowed grayscale"),onClick:g,disabled:m,children:m?"Loading...":"Step Inside"})]})]},"login")})}function $t(){const{user:t,tournament:s,tournamentActions:d}=$(),{login:n}=mt(),{handleTournamentComplete:l,handleStartNewTournament:r,handleTournamentSetup:u}=ht({userName:t.name,tournamentActions:d});return e.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col gap-8 min-h-[80vh] py-8",children:[e.jsx("section",{id:"tournament-area",className:"flex flex-col items-center justify-center p-4 min-h-[500px]",children:e.jsx(Z,{mode:"wait",children:s.isComplete&&s.names!==null?e.jsx(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full flex justify-center py-10",children:e.jsxs(ft,{background:"glass",padding:"xl",shadow:"xl",enableTilt:!0,className:"text-center max-w-2xl",children:[e.jsx("h2",{className:"text-4xl font-bold mb-6 gradient-text uppercase tracking-tighter",children:"A victor emerges from the eternal tournament"}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"text-6xl p-6 bg-purple-500/10 rounded-full border border-purple-500/20",children:"ðŸ†"})}),e.jsxs("p",{className:"text-lg text-slate-300 mb-10",children:["Your personal rankings have been updated. Head over to the"," ",e.jsx("strong",{className:"text-purple-400",children:"Analyze"})," section to see the full breakdown and compare results!"]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(H,{onClick:()=>document.getElementById("analysis")?.scrollIntoView({behavior:"smooth"}),variant:"primary",children:"Analyze Results"}),e.jsx(H,{onClick:r,variant:"secondary",children:"Start New Tournament"})]})]})},"complete"):s.names!==null?e.jsx(I.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-full",children:e.jsx(Lt,{names:s.names,existingRatings:s.ratings,onComplete:l,userName:t.name,onVote:d.addVote})},"tournament"):e.jsx(I.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"w-full",children:e.jsx(Gt,{onLogin:async c=>(await n({name:c}),!0),onStart:c=>{u(c)},userName:t.name,isLoggedIn:t.isLoggedIn})},"setup")})}),(s.names===null||s.isComplete)&&e.jsx("section",{id:"suggest",className:"flex flex-col items-center justify-center p-4 mt-8 border-t border-slate-800/20 pt-12",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8 text-center text-slate-400",children:"Suggest a Name"}),e.jsx(It,{})]})})]})}export{$t as default};
