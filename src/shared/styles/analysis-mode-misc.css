/**
 * @file analysis-mode-misc.css
 * @description Analysis Mode Miscellaneous Component Styles
 *
 * Styles for dashboard, metrics, tables, toggles, and other analysis components.
 */

   ANALYSIS PROGRESS - Visual Feedback
   ========================================================================== */
.analysis-progress {
	display: flex;
	align-items: center;
	gap: var(--analysis-gap-sm);
}

.analysis-progress-bar {
	flex: 1;
	height: var(--space-1);
	background: var(--analysis-border);
	border-radius: var(--analysis-radius-full);
	overflow: hidden;
}

.analysis-progress-fill {
	height: 100%;
	background: var(--analysis-accent);
	border-radius: var(--analysis-radius-full);
	transition: width var(--analysis-duration-slow) var(--analysis-ease);
}

.analysis-progress-text {
	font-family: var(--analysis-text-mono);
	font-size: var(--analysis-text-caption);
	color: var(--text-secondary);
	white-space: nowrap;
}

/* ==========================================================================
   ANALYSIS TOGGLE - Navbar Mode Switch
   ========================================================================== */
.analysis-toggle {
	position: relative;
	display: flex;
	align-items: center;
	gap: var(--analysis-gap-sm);
	padding: var(--analysis-gap-sm) var(--analysis-gap-md);
	font-size: var(--analysis-text-body);
	font-weight: var(--font-weight-semibold);
	color: var(--text-primary);
	background: transparent;
	border: var(--card-border-width) solid var(--analysis-border);
	border-radius: var(--analysis-radius-lg);
	cursor: pointer;
	transition: all var(--analysis-duration-normal) var(--analysis-ease);
}

.analysis-toggle:hover {
	background: var(--analysis-accent-subtle);
	border-color: var(--analysis-border-accent);
}

.analysis-toggle--active {
	color: var(--analysis-accent);
	background: var(--analysis-accent-muted);
	border-color: var(--analysis-accent);
	box-shadow: var(--analysis-accent-glow);
}

.analysis-toggle--active::before {
	content: "";
	position: absolute;
	inset: -1px;
	border-radius: inherit;
	background: linear-gradient(135deg, color-mix(in srgb, var(--analysis-accent) 20%, transparent), transparent);
	pointer-events: none;
}

.analysis-toggle-indicator {
	width: var(--space-2);
	height: var(--space-2);
	background: currentcolor;
	border-radius: var(--analysis-radius-full);
	opacity: 0.5;
	transition:
		opacity var(--analysis-duration-fast) var(--analysis-ease),
		transform var(--analysis-duration-fast) var(--analysis-ease);
}

.analysis-toggle--active .analysis-toggle-indicator {
	opacity: 1;
	animation: analysis-pulse var(--duration-slow) var(--ease-in-out) infinite;
}

/* ==========================================================================
   ANALYSIS MODE INDICATOR BANNER
   ========================================================================== */
.analysis-mode-banner {
	position: sticky;
	top: 0;
	z-index: var(--z-sticky);
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: var(--analysis-gap-md);
	padding: var(--analysis-gap-sm) var(--analysis-gap-lg);
	background: linear-gradient(
		135deg,
		color-mix(in srgb, var(--analysis-accent) 12%, transparent) 0%,
		color-mix(in srgb, var(--analysis-accent) 6%, transparent) 100%
	);
	border-bottom: var(--card-border-width) solid var(--analysis-border-accent);
	backdrop-filter: blur(16px);
	box-shadow: var(--analysis-shadow-sm);
	/* * Smooth entrance animation */
	animation: analysis-banner-slide-in var(--analysis-duration-fast) cubic-bezier(0.34, 1.56, 0.64, 1);
	transform-origin: top;
}

@keyframes analysis-banner-slide-in {
	from {
		opacity: 0;
		transform: translateY(-100%);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.analysis-mode-banner-content {
	display: flex;
	align-items: center;
	gap: var(--analysis-gap-sm);
}

.analysis-mode-banner-text-group {
	display: flex;
	flex-direction: column;
	gap: var(--analysis-gap-xs);
	flex: 1;
}

.analysis-mode-banner-text {
	font-size: var(--analysis-text-body);
	font-weight: var(--font-weight-semibold);
	color: var(--text-primary);
}

.analysis-mode-banner-description {
	font-size: var(--analysis-text-caption);
	color: var(--text-secondary);
	opacity: 0.85;
}

.analysis-mode-banner-shortcut {
	display: inline-flex;
	align-items: center;
	gap: var(--analysis-gap-xs);
	padding: var(--analysis-gap-xs) var(--analysis-gap-sm);
	font-family: var(--analysis-text-mono);
	font-size: var(--analysis-text-caption);
	color: var(--analysis-accent);
	background: var(--analysis-accent-muted);
	border: var(--card-border-width) solid var(--analysis-border-accent);
	border-radius: var(--analysis-radius-md);
}

.analysis-mode-banner-close {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: var(--icon-button-small);
	height: var(--icon-button-small);
	padding: 0;
	color: var(--text-secondary);
	background: transparent;
	border: none;
	border-radius: var(--analysis-radius-md);
	cursor: pointer;
	transition:
		color var(--analysis-duration-fast) var(--analysis-ease),
		background var(--analysis-duration-fast) var(--analysis-ease);
}

.analysis-mode-banner-close:hover {
	color: var(--text-primary);
	background: var(--analysis-surface-elevated);
}

@media (width <= var(--breakpoint-md)) {
	.analysis-panel {
		padding: var(--analysis-gap-md);
		border-radius: var(--analysis-radius-lg);
	}

	.analysis-stats {
		grid-template-columns: repeat(3, 1fr);
	}

	.analysis-toolbar {
		flex-direction: column;
		align-items: stretch;
	}

	.analysis-toolbar-group {
		justify-content: space-between;
	}

	.analysis-toolbar-divider {
		width: 100%;
		height: var(--card-border-width);
		margin: var(--analysis-gap-xs) 0;
	}

	.analysis-filters {
		flex-direction: column;
	}

	.analysis-filter {
		min-width: 100%;
	}
}

@media (width <= var(--breakpoint-sm)) {
	.analysis-stats {
		grid-template-columns: repeat(3, 1fr);
	}

	.analysis-highlights {
		grid-template-columns: 1fr;
	}

	.analysis-charts-grid {
		grid-template-columns: 1fr;
	}
}

/* ==========================================================================
   REDUCED MOTION
   ========================================================================== */
@media (prefers-reduced-motion: reduce) {
	.analysis-badge::before,
	.analysis-toggle-indicator {
		animation: none;
	}

	.analysis-panel,
	.analysis-stat,
	.analysis-btn,
	.analysis-input,
	.analysis-select,
	.analysis-toggle,
	.analysis-progress-fill,
	.analysis-chart-bar {
		transition: none;
	}
}

/* ==========================================================================
   ANALYSIS LOADING STATE
   ========================================================================== */
.analysis-loading {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: var(--analysis-gap-xl);
	font-size: var(--analysis-text-body);
	color: var(--text-secondary);
	animation: analysis-fade-in var(--analysis-duration-normal) var(--analysis-ease);
}

.analysis-loading::before {
	content: "";
	width: var(--space-4);
	height: var(--space-4);
	margin-right: var(--analysis-gap-sm);
	border: var(--space-1) solid var(--analysis-border);
	border-top-color: var(--analysis-accent);
	border-radius: var(--analysis-radius-full);
	animation: analysis-spin var(--duration-normal) linear infinite;
}

@keyframes analysis-spin {
	to {
		transform: rotate(360deg);
	}
}

@keyframes analysis-fade-in {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

/* ==========================================================================
   ANALYSIS CHART VALUE ENHANCEMENTS
   ========================================================================== */
.analysis-chart-value small {
	font-size: 0.75em;
	color: var(--text-tertiary);
	margin-left: var(--analysis-gap-xs);
}

/* ==========================================================================
   ANALYSIS DASHBOARD - Collapsible Header
   ========================================================================== */
.analysis-dashboard-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	padding: var(--analysis-gap-sm) var(--analysis-gap-md);
	margin: calc(-1 * var(--analysis-gap-lg));
	margin-bottom: 0;
	font-size: var(--analysis-text-body);
	font-weight: var(--font-weight-semibold);
	color: var(--text-primary);
	background: var(--analysis-surface-elevated);
	border: none;
	border-bottom: var(--card-border-width) solid var(--analysis-border);
	border-radius: var(--analysis-radius-xl) var(--analysis-radius-xl) 0 0;
	cursor: pointer;
	transition:
		background var(--analysis-duration-fast) var(--analysis-ease),
		color var(--analysis-duration-fast) var(--analysis-ease);
}

.analysis-dashboard-header:hover {
	background: var(--analysis-accent-subtle);
}

.analysis-dashboard-header:focus-visible {
	outline: var(--focus-ring-width) solid var(--analysis-accent);
	outline-offset: calc(var(--focus-ring-width) * -1);
}

.analysis-dashboard-title {
	display: flex;
	align-items: center;
	gap: var(--analysis-gap-sm);
}

.analysis-dashboard-chevron {
	display: inline-flex;
	font-size: 0.75em;
	transition: transform var(--analysis-duration-fast) var(--analysis-ease);
}

.analysis-dashboard-chevron.collapsed {
	transform: rotate(-90deg);
}

.analysis-dashboard-hint {
	font-size: var(--analysis-text-caption);
	font-weight: var(--font-weight-normal);
	color: var(--text-tertiary);
}

/* Shared collapsible content styles are in CollapsibleHeader.css */

/* Adjust panel padding when header is present */
.analysis-panel:has(.analysis-dashboard-header) {
	padding-top: 0;
}

/* ==========================================================================
   ANALYSIS BULK ACTIONS - Enhanced Usability
   ========================================================================== */

/* Button with icon styling */
.analysis-btn span[aria-hidden="true"] {
	font-size: 1em;
	line-height: 1;
}

/* Count badge in buttons */
.analysis-btn-count {
	font-size: 0.85em;
	opacity: 0.7;
	margin-left: var(--analysis-gap-xs);
}

/* Sticky toolbar for better access */
.analysis-toolbar {
	position: sticky;
	top: 0;
	z-index: var(--z-10);
	background: var(--analysis-surface-1);
	backdrop-filter: blur(12px);
}

/* Better visual feedback on selection */
.analysis-selection {
	background: var(--analysis-accent-muted);
	padding: var(--analysis-gap-xs) var(--analysis-gap-sm);
	border-radius: var(--analysis-radius-md);
	animation: analysis-selection-pulse var(--analysis-duration-fast) var(--analysis-ease);
}

@keyframes analysis-selection-pulse {
	0% {
		transform: scale(0.95);
		opacity: 0.7;
	}

	100% {
		transform: scale(1);
		opacity: 1;
	}
}

/* Tooltip-like title styling */
.analysis-btn[title] {
	position: relative;
}

/* Better hover states for action buttons */
.analysis-btn--danger:hover:not(:disabled) {
	transform: translateY(-1px);
}

.analysis-btn--primary:hover:not(:disabled) {
	transform: translateY(-1px);
}

/* Quick action hint */
.analysis-toolbar::after {
	content: "";
	position: absolute;
	bottom: -1px;
	left: 0;
	right: 0;
	height: var(--card-border-width);
	background: linear-gradient(90deg, transparent, var(--analysis-border-accent), transparent);
}

/* ==========================================================================
   ANALYSIS DASHBOARD - Summary in Collapsed State
   ========================================================================== */
.analysis-dashboard-summary {
	display: inline-flex;
	align-items: center;
	gap: var(--analysis-gap-xs);
	margin-left: var(--analysis-gap-md);
	padding-left: var(--analysis-gap-md);
	border-left: var(--card-border-width) solid var(--analysis-border);
	font-size: var(--analysis-text-caption);
	font-weight: var(--font-weight-normal);
	color: var(--text-secondary);
}

.analysis-dashboard-summary-item {
	white-space: nowrap;
}

.analysis-dashboard-summary-item strong {
	color: var(--analysis-accent);
	font-weight: var(--font-weight-semibold);
}

/* Better header styling */
.analysis-dashboard-header {
	gap: var(--analysis-gap-sm);
}

.analysis-dashboard-title {
	display: flex;
	align-items: center;
	gap: var(--analysis-gap-sm);
	flex: 1;
	min-width: 0;
}

/* Responsive summary */
@media (width <= var(--breakpoint-sm)) {
	.analysis-dashboard-summary {
		display: none;
	}
}

/* ==========================================================================
   ANALYSIS TOGGLE - Enhanced with Shortcut
   ========================================================================== */
.analysis-toggle {
	display: flex;
	align-items: center;
	justify-content: space-between;
	width: 100%;
}

.analysis-toggle-label {
	flex: 1;
	text-align: left;
}

.analysis-toggle-shortcut {
	font-family: var(--analysis-text-mono);
	font-size: 0.7em;
	padding: var(--card-border-width) 6px; /* 1px top/bottom, 6px left/right */
	background: var(--analysis-surface-elevated);
	border: var(--card-border-width) solid var(--analysis-border);
	border-radius: var(--analysis-radius-sm);
	opacity: 0.6;
	transition: opacity var(--analysis-duration-fast) var(--analysis-ease);
}

.analysis-toggle:hover .analysis-toggle-shortcut {
	opacity: 1;
}

.analysis-toggle--active .analysis-toggle-shortcut {
	background: color-mix(in srgb, var(--analysis-accent) 20%, transparent);
	border-color: var(--analysis-border-accent);
	color: var(--analysis-accent);
}

/* Hide shortcut on very small screens */
@media (width <= 400px) { /* Very small screens - keep as is */
	.analysis-toggle-shortcut {
		display: none;
	}
}
