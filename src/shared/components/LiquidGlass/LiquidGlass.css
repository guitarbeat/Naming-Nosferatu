.liquid-glass {
	position: relative;
	/* * Use specified radius, but cap to ~35% of height to avoid overly pill shapes */
	border-radius: min(
		calc(var(--radius, 28) * 1px),
		calc(var(--height, 80) * 0.35 * 1px)
	);
	overflow: visible;
	z-index: 1;
	/* * Frost effect: subtle background tint for better visual separation */
	background: light-dark(
		hsl(0deg 0% 100% / var(--frost, 0)),
		hsl(0deg 0% 0% / var(--frost, 0))
	);
	/* * Liquid glass uses backdrop-filter with SVG filter for refraction effect */
	/* * Note: backdrop-filter with url() is set via JavaScript for browser compatibility */
	backdrop-filter: var(--backdrop-filter, blur(8px) saturate(1));
	/* * Subtle glass-like shadows */
	/* Inner highlights */
	box-shadow:
		0 0 2px 1px
		light-dark(
			color-mix(in oklch, canvasText, #0000 85%),
			color-mix(in oklch, canvasText, #0000 65%)
		)
		inset,
		0 0 10px 4px
		light-dark(
			color-mix(in oklch, canvasText, #0000 90%),
			color-mix(in oklch, canvasText, #0000 85%)
		)
		inset,
		/* Outer depth shadows */ 0 4px 16px rgb(17 17 26 / 5%),
		0 8px 24px rgb(17 17 26 / 5%),
		0 16px 56px rgb(17 17 26 / 5%);
}

/* * When used for navbar, ensure it's fixed and visible */
.app-navbar-glass.liquid-glass {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	z-index: var(--z-sticky, 1020);
	overflow: visible; /* Allow collapse toggle to extend outside bounds */
	transition:
		position 0.3s ease,
		top 0.3s ease,
		left 0.3s ease,
		right 0.3s ease,
		bottom 0.3s ease,
		width 0.3s ease,
		height 0.3s ease,
		padding 0.3s ease;
}

/* Horizontal navbar glass */
.app-navbar-glass.liquid-glass.app-navbar--horizontal,
.app-navbar-glass.liquid-glass[data-orientation="horizontal"] {
	right: 0;
	bottom: auto;
	width: 100%;
	height: auto;
	min-height: auto;
}

/* Vertical navbar glass */
.app-navbar-glass.liquid-glass.app-navbar--vertical,
.app-navbar-glass.liquid-glass[data-orientation="vertical"] {
	right: auto;
	bottom: 0;
	width: auto;
	height: 100vh;
	min-height: 100vh;
}

.app-navbar-glass.liquid-glass::before {
	content: "";
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background:
		radial-gradient(
			120% 120% at 10% 10%,
			color-mix(
				in srgb,
				var(--glass-bg-strong, rgb(15 23 42 / 70%)) 80%,
				transparent
			),
			transparent 72%
		),
		linear-gradient(
			140deg,
			color-mix(in srgb, var(--glass-bg, rgb(15 23 42 / 55%)) 75%, transparent)
				0%,
			color-mix(
					in srgb,
					var(--glass-bg-strong, rgb(15 23 42 / 80%)) 65%,
					transparent
				)
				55%,
			color-mix(in srgb, var(--glass-bg, rgb(15 23 42 / 65%)) 55%, transparent)
				100%
		);
	opacity: 0.45;
	z-index: 0;
	pointer-events: none;
	transition: opacity 0.3s ease;
}

/* Direct children of liquid-glass should be above the filter */
.liquid-glass > *:not(.liquid-glass-filter, .displacement-image-container) {
	position: relative;
	z-index: 2;
	overflow: visible;
}

.liquid-glass-filter {
	width: 0;
	height: 0;
	pointer-events: none;
	position: absolute;
	top: 0;
	left: 0;
	z-index: -1;
	visibility: hidden;
	overflow: hidden;
}

.liquid-glass * {
	pointer-events: auto;
}

.displacement-image-container {
	position: absolute;
	width: 0;
	height: 0;
	overflow: hidden;
	opacity: 0;
	pointer-events: none;
}

@media (width <= 960px) {
	.app-navbar-glass.liquid-glass::before {
		opacity: 0.85;
	}

	/* * Reduce filter intensity on mobile for better readability */
	.app-navbar-glass.liquid-glass {
		--output-blur: 0.5;
		--saturation: 1.02;
		--frost: 0.18;
	}
}

@media (prefers-reduced-transparency: reduce) {
	.app-navbar-glass.liquid-glass::before {
		opacity: 0.8;
	}
}

@supports not (
		(-webkit-backdrop-filter: blur(1px)) or
		(backdrop-filter: blur(1px))
	) {
	.liquid-glass {
		background: color-mix(
			in srgb,
			var(--glass-bg-strong, rgb(15 23 42 / 80%)) 80%,
			rgb(6 11 22 / 90%)
		);
		box-shadow:
			0 8px 24px rgb(0 0 0 / 28%),
			0 2px 8px rgb(0 0 0 / 12%);
	}

	.app-navbar-glass.liquid-glass::before {
		opacity: 0.92;
		background: linear-gradient(
			150deg,
			color-mix(in srgb, var(--glass-bg, rgb(15 23 42 / 75%)) 90%, transparent),
			color-mix(
				in srgb,
				var(--glass-bg-strong, rgb(15 23 42 / 90%)) 85%,
				transparent
			)
		);
	}
}

.liquid-glass-button-shell {
	display: inline-flex;
}

.liquid-glass-button {
	width: 100%;
	height: 100%;
	background: none;
	border: none;
	color: #f8fbff;
	font-weight: 700;
	letter-spacing: 0.08em;
	text-transform: uppercase;
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 0.5rem;
	padding: 0 1.5rem;
}

.liquid-glass-button:focus-visible {
	outline: 2px solid rgb(255 255 255 / 75%);
	outline-offset: 3px;
}
