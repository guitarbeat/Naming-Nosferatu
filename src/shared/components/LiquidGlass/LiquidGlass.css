.liquid-glass {
	position: relative;
	/* * Use specified radius, but cap to ~35% of height to avoid overly pill shapes */
	border-radius: min(calc(var(--radius, 28) * 1px), calc(var(--height, 80) * 0.35 * 1px));
	overflow: visible;
	z-index: var(--z-elevate);
	/* * Frost effect: subtle background tint for better visual separation */
	background: light-dark(hsl(0deg 0% 100% / var(--frost, 0)), hsl(0deg 0% 0% / var(--frost, 0)));
	/* * Liquid glass uses backdrop-filter with SVG filter for refraction effect */
	/* * Note: backdrop-filter with url() is set via JavaScript for browser compatibility */
	backdrop-filter: var(--backdrop-filter, blur(8px) saturate(1));
	/* * Subtle glass-like shadows */
	/* Inner highlights */
	box-shadow:
		0 0 2px 1px
		light-dark(
			color-mix(in oklch, canvasText, #0000 85%),
			color-mix(in oklch, canvasText, #0000 65%)
		)
		inset,
		0 0 10px 4px
		light-dark(
			color-mix(in oklch, canvasText, #0000 90%),
			color-mix(in oklch, canvasText, #0000 85%)
		)
		inset,
		/* Outer depth shadows */ var(--shadow-md),
		var(--shadow-lg),
		var(--shadow-xl);
}

/* * When used for navbar, ensure it's fixed and visible */
.app-navbar-glass.liquid-glass {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	z-index: var(--z-sticky, 1020);
	overflow: visible; /* Allow collapse toggle to extend outside bounds */
	transition:
		position var(--duration-normal) var(--ease-standard),
		top var(--duration-normal) var(--ease-standard),
		left var(--duration-normal) var(--ease-standard),
		right var(--duration-normal) var(--ease-standard),
		bottom var(--duration-normal) var(--ease-standard),
		width var(--duration-normal) var(--ease-standard),
		height var(--duration-normal) var(--ease-standard),
		padding var(--duration-normal) var(--ease-standard);
}

/* Horizontal navbar glass */
.app-navbar-glass.liquid-glass.app-navbar--horizontal,
.app-navbar-glass.liquid-glass[data-orientation="horizontal"] {
	right: 0;
	bottom: auto;
	width: 100%;
	height: auto;
	min-height: auto;
}

/* Vertical navbar glass */
.app-navbar-glass.liquid-glass.app-navbar--vertical,
.app-navbar-glass.liquid-glass[data-orientation="vertical"] {
	right: auto;
	bottom: 0;
	width: auto;
	height: 100vh;
	min-height: 100vh;
}

.app-navbar-glass.liquid-glass::before {
	content: "";
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background:
		radial-gradient(
			120% 120% at 10% 10%,
			color-mix(in srgb, var(--glass-bg-strong, rgb(15 23 42 / 70%)) 80%, transparent),
			transparent 72%
		),
		linear-gradient(
			140deg,
			color-mix(in srgb, var(--glass-bg, rgb(15 23 42 / 55%)) 75%, transparent) 0%,
			color-mix(in srgb, var(--glass-bg-strong, rgb(15 23 42 / 80%)) 65%, transparent) 55%,
			color-mix(in srgb, var(--glass-bg, rgb(15 23 42 / 65%)) 55%, transparent) 100%
		);
	opacity: 0.45;
	z-index: var(--z-0);
	pointer-events: none;
	transition: var(--transition-opacity);
}

/* Direct children of liquid-glass should be above the filter */
.liquid-glass > *:not(.liquid-glass-filter, .displacement-image-container) {
	position: relative;
	z-index: var(--z-10);
	overflow: visible;
}

.liquid-glass-filter {
	width: 0;
	height: 0;
	pointer-events: none;
	position: absolute;
	top: 0;
	left: 0;
	z-index: -1;
	visibility: hidden;
	overflow: hidden;
}

.liquid-glass * {
	pointer-events: auto;
}

.displacement-image-container {
	position: absolute;
	width: 0;
	height: 0;
	overflow: hidden;
	opacity: 0;
	pointer-events: none;
}

@media (width <= 960px) {
	.app-navbar-glass.liquid-glass::before {
		opacity: 0.85;
	}

	/* * Reduce filter intensity on mobile for better readability */
	.app-navbar-glass.liquid-glass {
		--output-blur: 0.5;
		--saturation: 1.02;
		--frost: 0.18;
	}
}

@media (prefers-reduced-transparency: reduce) {
	.app-navbar-glass.liquid-glass::before {
		opacity: 0.8;
	}
}

@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
	.liquid-glass {
		background: color-mix(
			in srgb,
			var(--glass-bg-strong, rgb(15 23 42 / 80%)) 80%,
			rgb(6 11 22 / 90%)
		);
		box-shadow:
			var(--shadow-lg),
			var(--shadow-sm);
	}

	.app-navbar-glass.liquid-glass::before {
		opacity: 0.92;
		background: linear-gradient(
			150deg,
			color-mix(in srgb, var(--glass-bg, rgb(15 23 42 / 75%)) 90%, transparent),
			color-mix(in srgb, var(--glass-bg-strong, rgb(15 23 42 / 90%)) 85%, transparent)
		);
	}
}

.liquid-glass-button-shell {
	display: inline-flex;
}

.liquid-glass-button {
	width: 100%;
	height: 100%;
	background: none;
	border: none;
	color: var(--color-neutral-50);
	font-weight: var(--font-weight-bold);
	letter-spacing: var(--tracking-wider);
	text-transform: uppercase;
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--space-2);
	padding: 0 var(--space-6);
}

.liquid-glass-button:focus-visible {
	outline: var(--focus-ring-width) solid color-mix(in srgb, var(--color-neutral-50) 75%, transparent);
	outline-offset: var(--space-1);
}
